# 室内灯光自适应调整功能

## 功能概述

为室内子系统添加了根据建筑包围盒自动调整灯光位置和参数的功能，确保不同尺寸的建筑都能获得最佳的光照效果。

## 主要特性

### 1. 自适应灯光定位

- 根据建筑包围盒自动计算最佳灯光位置
- 主方向光位于建筑上方，提供主要照明
- 辅助方向光位于建筑侧面，提供补充照明

### 2. 智能参数调整

- 根据建筑尺寸自动调整灯光强度
- 根据建筑体积计算合适的阴影相机参数
- 环境光强度根据建筑尺寸动态调整

### 3. 阴影优化

- 阴影相机参数根据建筑尺寸自动调整
- 确保阴影覆盖整个建筑区域

## 核心方法

### `adjustLightsToBuilding(building)`

- 获取建筑包围盒信息
- 计算建筑尺寸和体积
- 调整主方向光和辅助方向光位置
- 设置灯光目标点
- 调整阴影相机参数

### `addLightHelpers()` / `removeLightHelpers()`

- 添加/移除灯光辅助器用于调试
- 显示灯光位置和阴影相机范围

## 集成点

- 在 `initLight()` 中创建基础光源
- 在 `onLoaded()` 中调用灯光调整
- 在清理方法中移除灯光辅助器

## 测试页面

`test_indoor_lights.html` 提供完整的测试环境，支持：

- 实时调整建筑尺寸
- 显示灯光位置信息
- 切换灯光辅助器
- 重置灯光位置

## 使用方法

```bash
# 启动开发服务器
npm run dev

# 访问测试页面
http://localhost:5173/test_indoor_lights.html
```

该功能完全集成到现有的室内子系统中，为不同尺寸的建筑提供最佳的光照效果。
